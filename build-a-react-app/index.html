<html>
<title>PaulXiao</title>
<head><meta name="generator" content="Hexo 3.9.0">
<meta charset="utf-8">
 
    <link rel="stylesheet" href="/styles/index.css">
  
  <link rel="stylesheet" href="/styles/font-awesome-4.7.0/css/font-awesome.min.css">
</head></html>
<body>
  <div id="container">
    <div id="wrap">
      <header class="header">
<div class="wrapper">
<div class="logo">
   <img src="images/baby.jpg" alt="" style="display:none">
   <span class="slogan">
    <h1>Pulse</h1>
    <p>wirte it down, and keep it up</p>
   </span>
</div>
<nav>

    <a class="main-nav-link"  href="/projects">Projects</a>

    <a class="main-nav-link"  href="/">Articles</a>

    <a class="main-nav-link"  href="/gallery">Gallery</a>

    <a class="main-nav-link"  href="/about">About</a>

</nav>
</div>
</header>
      <div class="outer">
        <section id="main">
<div class="archive">
 <div class="title">Articles</div>
 <div class="wrap">
<div class="left">

 <div class="archive-item">
   <div class="article">
    <!-- Title -->
    <h2 class="article-title">
            build a react app
    </h2>
    <!-- Date and Author -->
    <p class="article-meta">
        2019-08-08
        
    </p>
    <!-- Content -->
    <div class="article-entry">
        <h4 id="this-props-content"><a href="#this-props-content" class="headerlink" title="this.props.content"></a>this.props.content</h4><h4 id="scss-support"><a href="#scss-support" class="headerlink" title="scss support"></a>scss support</h4><p>default support scss, only need install node-sass as dependency</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i node-sass -D</span><br></pre></td></tr></table></figure>

<h4 id="how-user-auth-works"><a href="#how-user-auth-works" class="headerlink" title="how user auth works"></a>how user auth works</h4><blockquote>
<p><a href="https://reacttraining.com/react-router/web/example/auth-workflow" target="_blank" rel="noopener">auth-workflow</a></p>
</blockquote>
<h4 id="add-antd"><a href="#add-antd" class="headerlink" title="add antd"></a>add antd</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">yarn add antd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;Button&#125; <span class="keyword">from</span> <span class="string">'antd'</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">'~antd/dist/antd.css'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="data-bind"><a href="#data-bind" class="headerlink" title="data bind"></a>data bind</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// binding input value by targe name</span></span><br><span class="line">handleChange(event) &#123;</span><br><span class="line">   <span class="keyword">const</span> name = event.target.name</span><br><span class="line">   <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">     [name]: event.target.value</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&lt;Input type=<span class="string">"text"</span> name=<span class="string">"username"</span> </span><br><span class="line">       value=&#123;<span class="keyword">this</span>.state.username&#125; </span><br><span class="line">       onChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="functional-vs-class-components"><a href="#functional-vs-class-components" class="headerlink" title="functional-vs-class-components"></a>functional-vs-class-components</h4><blockquote>
<p><a href="https://medium.com/@Zwenza/functional-vs-class-components-in-react-231e3fbd7108" target="_blank" rel="noopener">Functional vs Class-Components in React</a></p>
</blockquote>
<ul>
<li>Functional component<ul>
<li>pros<ul>
<li>Functional component are much easier to read and test because they are plain JavaScript functions without state or lifecycle-hooks</li>
<li>You end up with less code</li>
<li>They help you to use best practices. It will get easier to separate container and presentational components because you need to think more about your component’s state if you don’t have access to setState() in your component</li>
<li>The React team mentioned that there may be a performance boost for functional component in future React versions</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Class component<ul>
<li>pros<ul>
<li>state</li>
<li>lifecycle-hooks</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="withRouter-pass-props"><a href="#withRouter-pass-props" class="headerlink" title="withRouter pass props"></a>withRouter pass props</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> AuthButton = withRouter(</span><br><span class="line">  (&#123; history , ...props&#125;) =&gt;</span><br><span class="line">  isLogin ? (</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">        Welcome! &#123;props.name&#125;</span><br><span class="line">        &lt;Button</span><br><span class="line">         </span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            fakeAuth.signout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              history.push(<span class="string">"/"</span>);</span><br><span class="line">              clearToken();</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          Sign out</span><br><span class="line">        &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>span&gt;</span><br><span class="line">    ) : (</span><br><span class="line">      &lt;p&gt;You are not logged <span class="keyword">in</span>.&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>

<h4 id="use-constructor-or-not"><a href="#use-constructor-or-not" class="headerlink" title="use constructor or not"></a>use constructor or not</h4><blockquote>
<p><a href="https://daveceddia.com/where-initialize-state-react/" target="_blank" rel="noopener">where-initialize-state-react</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// use constructorgit </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="comment">// Required step: always call the parent class' constructor</span></span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the state directly. Use props if necessary.</span></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      loggedIn: <span class="literal">false</span>,</span><br><span class="line">      currentState: <span class="string">"not-panic"</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Note: think carefully before initializing</span></span><br><span class="line">      <span class="comment">// state based on props!</span></span><br><span class="line">      someInitialValue: <span class="keyword">this</span>.props.initialValue</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// whatever you like</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class field declarations for JavaScript stage 3</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    loggedIn: <span class="literal">false</span>,</span><br><span class="line">    currentState: <span class="string">"not-panic"</span>,</span><br><span class="line">    someDefaultThing: <span class="keyword">this</span>.props.whatever</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// whatever you like</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a><a href="https://www.npmjs.com/package/redux-thunk" target="_blank" rel="noopener">react-redux</a></h4><p><strong>Without react-redux throw error</strong>: Actions must be plain objects. Use custom middleware for async actions. </p>
<blockquote>
<p>Redux Thunk middleware allows you to write action creators that return a function instead of an action. The thunk can be used to delay the dispatch of an action, or to dispatch only if a certain condition is met. The inner function receives the store methods dispatch and getState as parameters</p>
</blockquote>
<h4 id="umi-antd-dva"><a href="#umi-antd-dva" class="headerlink" title="umi antd dva"></a>umi antd dva</h4><blockquote>
<p>the antd combo</p>
</blockquote>
<h4 id="wtf-is-this-props-children"><a href="#wtf-is-this-props-children" class="headerlink" title="wtf is this.props.children"></a>wtf is this.props.children</h4><blockquote>
<p>same as slots in vue</p>
</blockquote>

    </div>
    <div class="foot">
     
      
     <a href="/build-a-node-restful-api/"><span class="fa fa-arrow-right"></span>Next</a>
      
    </div>
     
<section id="comment">
  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>

</div>
  </div>

</div>
<div class="right">
   <div class="wrapper">
     <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" autocomplete="off"
    name="q" results="0" placeholder="Search" 
    class="search-input"/>
   </div>  
  <div id="local-search-result" class="search-content" style="display:none">
  </div>
  </div>
     <div class="filters">
<div class="filters-title">Tags</div>
 <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/circle-ci/">circle-ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongoose/">mongoose</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful-api/">restful api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-test/">vue-test</a><span class="tag-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title"> Categories</div>
 <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/deploy/">deploy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title">Archives</div>
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">7</span></li></ul>
</div>

     
  <div class="widget-wrap">
    <h3 class="widget-title">Recent posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/build-a-react-app/">build a react app</a>
          </li>
        
          <li>
            <a href="/build-a-node-restful-api/">build a node restful api</a>
          </li>
        
          <li>
            <a href="/how-does-react-serviceWorker-works/">how does react serviceWorker works</a>
          </li>
        
          <li>
            <a href="/how-to-use-mongoose/">how to use mongoose</a>
          </li>
        
          <li>
            <a href="/deploy-web-app-on-heroku/">deploy web app on heroku</a>
          </li>
        
      </ul>
    </div>
  </div>

   </div>
</div>
</div>
</div></section>
      </div>
      <footer class="footer">
<div class="author">Created by &copy; paulxiaooo</div>
<div class="link">
<a href="https://github.com/paul-xiao/"><span class="fa fa-lg fa-github-square"></span></a>
</div>
</footer>
    </div>
  </div>
  <script src="/js/jquery.min.js"></script>
<script>
$(function () {
    window.addEventListener('keydown', function (e) {
        $('#local-search-result').hide();
        var val = $('#local-search-input').val()
        try {
            if(val && e.keyCode == 13){
               $('#local-search-input').blur();
            
                $.get('/search.json', function(data) {
                    const result = filterPosts(data, [val])
                     $('#local-search-result').show();
                     $('#local-search-result').append(createInnerHTML(result))
                })
            }
        } catch (error) {
            console.log(error);
        }
    })


    $('body').click(function() {
         $('#local-search-result').hide();
    })
    
})

function filterPosts(data, keywords) {
    var results = [];

    data.forEach(function(item) {
      var isMatch = false;
      var matchKeyWords = [];
      item.content = item.content.replace(/<[^>]*>/g, '');

      keywords.forEach(function(word) {
        var reg = new RegExp(word, 'i');
        var indexTitle = item.title.search(reg);
        var indexContent = item.content.search(reg);

        if (indexTitle > -1 || indexContent > -1) {
          isMatch = true;
          matchKeyWords.push(word);
        }
      });

      if (isMatch) {
        item.matchKeyWords = matchKeyWords;
        results.push(item);
      }
    });

    return results;
  }
function createInnerHTML(results) {
    var content = '';
    results.forEach(function(item) {
      var postContent;
      postContent = highlightText(item.content, item.matchKeyWords);
      postContent = getPreviewContent(postContent, item.matchKeyWords);

      item.title = highlightText(item.title, item.matchKeyWords);

      item = '<li class="search-item">' +
        '<a href="' + item.url + '"">' +
        '<h3 class="search-item-title">' + item.title + '</h3>' +
        '</a>' +
        '<p class="search-item-content">' + postContent + '</p>' +
        '</li>';
      content += item;
    });

    return content;
  }

  function getPreviewContent(content, matchKeyWords) {
    var isMatch = false;
    var index = 0;
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp(word, 'i');
      index = content.search(reg);
      if (index < 0) {
        return;
      }

      isMatch = true;
    });

    if (isMatch) {
      if (index < 120) {
        content = content.substr(0, 140);
      } else {
        content = content.substr(index - 60, 200);
      }
    } else {
      content = content.substr(0, 120);
    }

    return content;
  }

  function highlightText(text, matchKeyWords) {
    text = text.replace(/<[^>]*>/g, '');
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp('(' + word + ')', 'ig');
      text = text.replace(reg, '<span class="color-hightlight">$1</span>');
    });

    return text;
  }

</script>

    <script type="text/javascript">
    var disqus_shortname = 'paulxiao';
    var disqus_config = function () {
        this.page.url = 'https://paul-xiao.github.io/build-a-react-app/';
        this.page.identifier = '/build-a-react-app/';
        this.page.title = 'build a react app';
    };
    (function(){
      var d = document;
      var dsq = d.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (d.head || d.body).appendChild(dsq);
    })();
    </script>

</body>
</html>