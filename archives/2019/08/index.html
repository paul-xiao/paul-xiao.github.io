<html>
<title>PaulXiao</title>
<head><meta name="generator" content="Hexo 3.9.0">
<meta charset="utf-8">
 
    <link rel="stylesheet" href="/styles/index.css">
  
  <link rel="stylesheet" href="/styles/font-awesome-4.7.0/css/font-awesome.min.css">
</head></html>
<body>
  <div id="container">
    <div id="wrap">
      <header class="header">
<div class="wrapper">
<div class="logo">
   <img src="images/baby.jpg" alt="" style="display:none">
   <span class="slogan">
    <h1>Pulse</h1>
    <p>wirte it down, and keep it up</p>
   </span>
</div>
<nav>

    <a class="main-nav-link"  href="/projects">Projects</a>

    <a class="main-nav-link"  href="/">Articles</a>

    <a class="main-nav-link"  href="/gallery">Gallery</a>

    <a class="main-nav-link"  href="/about">About</a>

</nav>
</div>
</header>
      <div class="outer">
        <section id="main"><div class="archive">
 <div class="title">Articles</div>
 <div class="wrap">
<div class="left">


<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/build-a-react-app/">build a react app</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>framework</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>react</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/build-a-react-app/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="this-props-content"><a href="#this-props-content" class="headerlink" title="this.props.content"></a>this.props.content</h4><h4 id="scss-support"><a href="#scss-support" class="headerlink" title="scss support"></a>scss support</h4><h4 id="how-user-auth-works"><a href="#how-user-auth-works" class="headerlink" title="how user auth works"></a>how user auth works</h4>
        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/build-a-node-restful-api/">build a node restful api</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>restful api</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/build-a-node-restful-api/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="build-dev-env"><a href="#build-dev-env" class="headerlink" title="build dev env"></a>build dev env</h4><ul>
<li><p>nodemon</p>
<blockquote>
<p><a href="https://github.com/remy/nodemon" target="_blank" rel="noopener">https://github.com/remy/nodemon</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// nodeamon</span></span><br><span class="line">npm install --save-dev nodemon</span><br><span class="line"></span><br><span class="line">touch nodemon.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"restartable"</span>: <span class="string">"rs"</span>,</span><br><span class="line">  <span class="string">"ignore"</span>: [</span><br><span class="line">    <span class="string">".git"</span>,</span><br><span class="line">    <span class="string">"node_modules/**/node_modules"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"verbose"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"execMap"</span>: &#123;</span><br><span class="line">    <span class="string">"js"</span>: <span class="string">"node --harmony"</span> <span class="comment">// support es6</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"events"</span>: &#123;</span><br><span class="line">    <span class="string">"restart"</span>: <span class="string">"osascript -e 'display notification \"App restarted due to:\n'$FILENAME'\" with title \"nodemon\"'"</span></span><br><span class="line">  &#125;,</span><br><span class="line">   <span class="comment">// By default nodemon monitors the current working directory. If you want to take control of that option, use the --watch option to add specific paths:</span></span><br><span class="line">  <span class="string">"watch"</span>: [</span><br><span class="line">    <span class="string">"test/fixtures/"</span>,</span><br><span class="line">    <span class="string">"test/samples/"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"env"</span>: &#123;</span><br><span class="line">    <span class="string">"NODE_ENV"</span>: <span class="string">"development"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"ext"</span>: <span class="string">"js,json"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>cross-env</p>
<blockquote>
<p>Run scripts that set and use environment variables across platforms</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line"><span class="string">"start"</span>: <span class="string">"cross-env NODE_ENV=production node server.js"</span>,</span><br><span class="line"><span class="string">"dev"</span>: <span class="string">"cross-env NODE_ENV=development nodemon --inspect server.js"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>

        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/how-does-react-serviceWorker-works/">how does react serviceWorker works</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>framework</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>react</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/how-does-react-serviceWorker-works/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="serviceWorker"><a href="#serviceWorker" class="headerlink" title="serviceWorker"></a>serviceWorker</h4><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/23966686" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/23966686</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This optional code is used to register a service worker.</span></span><br><span class="line"><span class="comment">// register() is not called by default.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This lets the app load faster on subsequent visits in production, and gives</span></span><br><span class="line"><span class="comment">// it offline capabilities. However, it also means that developers (and users)</span></span><br><span class="line"><span class="comment">// will only see deployed updates on subsequent visits to a page, after all the</span></span><br><span class="line"><span class="comment">// existing tabs open on the page have been closed, since previously cached</span></span><br><span class="line"><span class="comment">// resources are updated in the background.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want your app to work offline and load faster, you can change</span></span><br><span class="line"><span class="comment">// unregister() to register() below. Note this comes with some pitfalls.</span></span><br><span class="line"><span class="comment">// Learn more about service workers: https://bit.ly/CRA-PWA</span></span><br><span class="line">serviceWorker.unregister();</span><br></pre></td></tr></table></figure>


        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/how-to-use-mongoose/">how to use mongoose</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>database</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>mongoose</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/how-to-use-mongoose/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="Schemas"><a href="#Schemas" class="headerlink" title="Schemas"></a>Schemas</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define collection and schema for Course</span></span><br><span class="line"><span class="keyword">var</span> Test = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    course_name: &#123;</span><br><span class="line">        type: <span class="built_in">String</span></span><br><span class="line">    &#125;,</span><br><span class="line">    course_price: &#123;</span><br><span class="line">        type: <span class="built_in">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    timestamps: <span class="literal">true</span>,</span><br><span class="line">    collection: <span class="string">'test'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">'Test'</span>, Test);</span><br></pre></td></tr></table></figure>

<h4 id="three-way-to-get-req-parameters"><a href="#three-way-to-get-req-parameters" class="headerlink" title="three way to get req parameters"></a>three way to get req parameters</h4><blockquote>
<p><a href="https://i5ting.github.io/node-http/#106" target="_blank" rel="noopener">https://i5ting.github.io/node-http/#106</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// req.body.xxx </span></span><br><span class="line"><span class="comment">// has to be post requset</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">'express'</span>)();</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">var</span> multer = <span class="built_in">require</span>(<span class="string">'multer'</span>); </span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json()); <span class="comment">// for parsing application/json</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;)); <span class="comment">// for parsing application/x-www-form-urlencoded</span></span><br><span class="line">app.use(multer()); <span class="comment">// for parsing multipart/form-data</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  res.json(req.body);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// req.query.xxx</span></span><br><span class="line">GET /search?q=tobi+ferret</span><br><span class="line">GET /shoes?order=desc&amp;shoe[color]=blue&amp;shoe[type]=converse</span><br><span class="line"></span><br><span class="line"><span class="comment">// req.params.xxx</span></span><br><span class="line">app.get(<span class="string">'/user/:id'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'user '</span> + req.params.id);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/deploy-web-app-on-heroku/">deploy web app on heroku</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/6</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>deploy</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>heroku</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/deploy-web-app-on-heroku/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="get-started-with-nodejs"><a href="#get-started-with-nodejs" class="headerlink" title="get started with nodejs"></a>get started with nodejs</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># install</span></span><br><span class="line">npm install -g heroku</span><br><span class="line"></span><br><span class="line"><span class="comment"># login </span></span><br><span class="line">heroku login</span><br><span class="line"></span><br><span class="line"><span class="comment"># create</span></span><br><span class="line">heroku create</span><br><span class="line"></span><br><span class="line"><span class="comment"># push</span></span><br><span class="line">git push heroku master</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ensure that at least one instance of the app is running:</span></span><br><span class="line">heroku ps:scale web=1</span><br><span class="line">heroku ps:scale web=0 <span class="comment"># no app running</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vist on broswer</span></span><br><span class="line">heroku open</span><br><span class="line"></span><br><span class="line"><span class="comment"># logs</span></span><br><span class="line">heroku logs --tail</span><br><span class="line"></span><br><span class="line"><span class="comment"># procfile - to explicitly declare what command should be executed to start your app.</span></span><br><span class="line">web: node index.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># run app locally</span></span><br><span class="line">heroku <span class="built_in">local</span> web</span><br><span class="line"></span><br><span class="line"><span class="comment"># push changes</span></span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">'commits'</span></span><br><span class="line">git push heroku master</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash</span></span><br><span class="line">heroku run bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># deploy react apps</span></span><br><span class="line">touch Procfile</span><br><span class="line">web: npm start</span><br><span class="line"></span><br><span class="line"><span class="comment"># branch not updating?</span></span><br><span class="line">git push heroku local_branch_name:master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># clear build cache</span></span><br><span class="line">heroku config:<span class="built_in">set</span> NODE_MODULES_CACHE=<span class="literal">false</span></span><br><span class="line">git commit -am <span class="string">'disable node_modules cache'</span> --allow-empty</span><br><span class="line"></span><br><span class="line"><span class="comment"># addons</span></span><br><span class="line">heroku addons:create mongolab <span class="comment"># will generate a MONGODB_URI</span></span><br><span class="line">heroku config <span class="comment">#check configs</span></span><br><span class="line">MONGODB_URI: mongodb://&lt;dbuser&gt;:&lt;dbpassword&gt;@ds259787.mlab.com:59787/heroku_pgd6txgv</span><br><span class="line"></span><br><span class="line"><span class="comment"># DB config</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    secret:<span class="string">'paultest'</span>,</span><br><span class="line">    DB: process.env.MONGODB_URI|| <span class="string">'mongodb://localhost:27017/test'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        </div>
    </div>
  </div>

 
</div>
<div class="right">
   <div class="wrapper">
     <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" autocomplete="off"
    name="q" results="0" placeholder="Search" 
    class="search-input"/>
   </div>  
  <div id="local-search-result" class="search-content" style="display:none">
  </div>
  </div>
     <div class="filters">
<div class="filters-title">Tags</div>
 <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongoose/">mongoose</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful-api/">restful api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-test/">vue-test</a><span class="tag-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title"> Categories</div>
 <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/deploy/">deploy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title">Archives</div>
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">6</span></li></ul>
</div>

     
  <div class="widget-wrap">
    <h3 class="widget-title">Recent posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/build-a-react-app/">build a react app</a>
          </li>
        
          <li>
            <a href="/build-a-node-restful-api/">build a node restful api</a>
          </li>
        
          <li>
            <a href="/how-does-react-serviceWorker-works/">how does react serviceWorker works</a>
          </li>
        
          <li>
            <a href="/how-to-use-mongoose/">how to use mongoose</a>
          </li>
        
          <li>
            <a href="/deploy-web-app-on-heroku/">deploy web app on heroku</a>
          </li>
        
      </ul>
    </div>
  </div>

   </div>
</div>
</div>
</div></section>
      </div>
      <footer class="footer">
<div class="author">Created by &copy; paulxiaooo</div>
<div class="link">
<a href="https://github.com/paul-xiao/"><span class="fa fa-lg fa-github-square"></span></a>
</div>
</footer>
    </div>
  </div>
  <script src="/js/jquery.min.js"></script>
<script>
$(function () {
    window.addEventListener('keydown', function (e) {
        $('#local-search-result').hide();
        var val = $('#local-search-input').val()
        try {
            if(val && e.keyCode == 13){
               $('#local-search-input').blur();
            
                $.get('/search.json', function(data) {
                    const result = filterPosts(data, [val])
                     $('#local-search-result').show();
                     $('#local-search-result').append(createInnerHTML(result))
                })
            }
        } catch (error) {
            console.log(error);
        }
    })


    $('body').click(function() {
         $('#local-search-result').hide();
    })
    
})

function filterPosts(data, keywords) {
    var results = [];

    data.forEach(function(item) {
      var isMatch = false;
      var matchKeyWords = [];
      item.content = item.content.replace(/<[^>]*>/g, '');

      keywords.forEach(function(word) {
        var reg = new RegExp(word, 'i');
        var indexTitle = item.title.search(reg);
        var indexContent = item.content.search(reg);

        if (indexTitle > -1 || indexContent > -1) {
          isMatch = true;
          matchKeyWords.push(word);
        }
      });

      if (isMatch) {
        item.matchKeyWords = matchKeyWords;
        results.push(item);
      }
    });

    return results;
  }
function createInnerHTML(results) {
    var content = '';
    results.forEach(function(item) {
      var postContent;
      postContent = highlightText(item.content, item.matchKeyWords);
      postContent = getPreviewContent(postContent, item.matchKeyWords);

      item.title = highlightText(item.title, item.matchKeyWords);

      item = '<li class="search-item">' +
        '<a href="' + item.url + '"">' +
        '<h3 class="search-item-title">' + item.title + '</h3>' +
        '</a>' +
        '<p class="search-item-content">' + postContent + '</p>' +
        '</li>';
      content += item;
    });

    return content;
  }

  function getPreviewContent(content, matchKeyWords) {
    var isMatch = false;
    var index = 0;
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp(word, 'i');
      index = content.search(reg);
      if (index < 0) {
        return;
      }

      isMatch = true;
    });

    if (isMatch) {
      if (index < 120) {
        content = content.substr(0, 140);
      } else {
        content = content.substr(index - 60, 200);
      }
    } else {
      content = content.substr(0, 120);
    }

    return content;
  }

  function highlightText(text, matchKeyWords) {
    text = text.replace(/<[^>]*>/g, '');
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp('(' + word + ')', 'ig');
      text = text.replace(reg, '<span class="color-hightlight">$1</span>');
    });

    return text;
  }

</script>

</body>
</html>