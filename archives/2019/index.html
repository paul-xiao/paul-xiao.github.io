<html>
<title>PaulXiao</title>
<head><meta name="generator" content="Hexo 3.9.0">
<meta charset="utf-8">
 
    <link rel="stylesheet" href="/styles/index.css">
  
  <link rel="stylesheet" href="/styles/font-awesome-4.7.0/css/font-awesome.min.css">
</head></html>
<body>
  <div id="container">
    <div id="wrap">
      <header class="header">
<div class="wrapper">
<div class="logo">
   <img src="images/baby.jpg" alt="" style="display:none">
   <span class="slogan">
    <h1>Pulse</h1>
    <p>wirte it down, and keep it up</p>
   </span>
</div>
<nav>

    <a class="main-nav-link"  href="/projects">Projects</a>

    <a class="main-nav-link"  href="/">Articles</a>

    <a class="main-nav-link"  href="/gallery">Gallery</a>

    <a class="main-nav-link"  href="/about">About</a>

</nav>
</div>
</header>
      <div class="outer">
        <section id="main"><div class="archive">
 <div class="title">Articles</div>
 <div class="wrap">
<div class="left">


<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/build-a-react-app/">build a react app</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>framework</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>react</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/build-a-react-app/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="this-props-content"><a href="#this-props-content" class="headerlink" title="this.props.content"></a>this.props.content</h4><h4 id="scss-support"><a href="#scss-support" class="headerlink" title="scss support"></a>scss support</h4><p>default support scss, only need install node-sass as dependency</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i node-sass -D</span><br></pre></td></tr></table></figure>

<h4 id="how-user-auth-works"><a href="#how-user-auth-works" class="headerlink" title="how user auth works"></a>how user auth works</h4><blockquote>
<p><a href="https://reacttraining.com/react-router/web/example/auth-workflow" target="_blank" rel="noopener">auth-workflow</a></p>
</blockquote>
<h4 id="add-antd"><a href="#add-antd" class="headerlink" title="add antd"></a>add antd</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">yarn add antd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;Button&#125; <span class="keyword">from</span> <span class="string">'antd'</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">'~antd/dist/antd.css'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="data-bind"><a href="#data-bind" class="headerlink" title="data bind"></a>data bind</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// binding input value by targe name</span></span><br><span class="line">handleChange(event) &#123;</span><br><span class="line">   <span class="keyword">const</span> name = event.target.name</span><br><span class="line">   <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">     [name]: event.target.value</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&lt;Input type=<span class="string">"text"</span> name=<span class="string">"username"</span> </span><br><span class="line">       value=&#123;<span class="keyword">this</span>.state.username&#125; </span><br><span class="line">       onChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="functional-vs-class-components"><a href="#functional-vs-class-components" class="headerlink" title="functional-vs-class-components"></a>functional-vs-class-components</h4><blockquote>
<p><a href="https://medium.com/@Zwenza/functional-vs-class-components-in-react-231e3fbd7108" target="_blank" rel="noopener">Functional vs Class-Components in React</a></p>
</blockquote>
<ul>
<li>Functional component<ul>
<li>pros<ul>
<li>Functional component are much easier to read and test because they are plain JavaScript functions without state or lifecycle-hooks</li>
<li>You end up with less code</li>
<li>They help you to use best practices. It will get easier to separate container and presentational components because you need to think more about your component’s state if you don’t have access to setState() in your component</li>
<li>The React team mentioned that there may be a performance boost for functional component in future React versions</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Class component<ul>
<li>pros<ul>
<li>state</li>
<li>lifecycle-hooks</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="withRouter-pass-props"><a href="#withRouter-pass-props" class="headerlink" title="withRouter pass props"></a>withRouter pass props</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> AuthButton = withRouter(</span><br><span class="line">  (&#123; history , ...props&#125;) =&gt;</span><br><span class="line">  isLogin ? (</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">        Welcome! &#123;props.name&#125;</span><br><span class="line">        &lt;Button</span><br><span class="line">         </span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            fakeAuth.signout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              history.push(<span class="string">"/"</span>);</span><br><span class="line">              clearToken();</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          Sign out</span><br><span class="line">        &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>span&gt;</span><br><span class="line">    ) : (</span><br><span class="line">      &lt;p&gt;You are not logged <span class="keyword">in</span>.&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>

<h4 id="use-constructor-or-not"><a href="#use-constructor-or-not" class="headerlink" title="use constructor or not"></a>use constructor or not</h4><blockquote>
<p><a href="https://daveceddia.com/where-initialize-state-react/" target="_blank" rel="noopener">where-initialize-state-react</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// use constructor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="comment">// Required step: always call the parent class' constructor</span></span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the state directly. Use props if necessary.</span></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      loggedIn: <span class="literal">false</span>,</span><br><span class="line">      currentState: <span class="string">"not-panic"</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Note: think carefully before initializing</span></span><br><span class="line">      <span class="comment">// state based on props!</span></span><br><span class="line">      someInitialValue: <span class="keyword">this</span>.props.initialValue</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// whatever you like</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class field declarations for JavaScript stage 3</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    loggedIn: <span class="literal">false</span>,</span><br><span class="line">    currentState: <span class="string">"not-panic"</span>,</span><br><span class="line">    someDefaultThing: <span class="keyword">this</span>.props.whatever</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// whatever you like</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/build-a-node-restful-api/">build a node restful api</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>restful api</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/build-a-node-restful-api/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="build-dev-env"><a href="#build-dev-env" class="headerlink" title="build dev env"></a>build dev env</h4><ul>
<li><p>nodemon</p>
<blockquote>
<p><a href="https://github.com/remy/nodemon" target="_blank" rel="noopener">https://github.com/remy/nodemon</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// nodeamon</span></span><br><span class="line">npm install --save-dev nodemon</span><br><span class="line"></span><br><span class="line">touch nodemon.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"restartable"</span>: <span class="string">"rs"</span>,</span><br><span class="line">  <span class="string">"ignore"</span>: [</span><br><span class="line">    <span class="string">".git"</span>,</span><br><span class="line">    <span class="string">"node_modules/**/node_modules"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"verbose"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"execMap"</span>: &#123;</span><br><span class="line">    <span class="string">"js"</span>: <span class="string">"node --harmony"</span> <span class="comment">// support es6</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"events"</span>: &#123;</span><br><span class="line">    <span class="string">"restart"</span>: <span class="string">"osascript -e 'display notification \"App restarted due to:\n'$FILENAME'\" with title \"nodemon\"'"</span></span><br><span class="line">  &#125;,</span><br><span class="line">   <span class="comment">// By default nodemon monitors the current working directory. If you want to take control of that option, use the --watch option to add specific paths:</span></span><br><span class="line">  <span class="string">"watch"</span>: [</span><br><span class="line">    <span class="string">"test/fixtures/"</span>,</span><br><span class="line">    <span class="string">"test/samples/"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"env"</span>: &#123;</span><br><span class="line">    <span class="string">"NODE_ENV"</span>: <span class="string">"development"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"ext"</span>: <span class="string">"js,json"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>cross-env</p>
<blockquote>
<p>Run scripts that set and use environment variables across platforms</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line"><span class="string">"start"</span>: <span class="string">"cross-env NODE_ENV=production node server.js"</span>,</span><br><span class="line"><span class="string">"dev"</span>: <span class="string">"cross-env NODE_ENV=development nodemon --inspect server.js"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="User-auth"><a href="#User-auth" class="headerlink" title="User auth"></a>User auth</h4><ul>
<li><p>bcrypt</p>
<blockquote>
<p>A library to help you hash passwords.</p>
</blockquote>
</li>
<li><p>cors</p>
<blockquote>
<p><a href="https://medium.com/@alexishevia/using-cors-in-express-cac7e29b005b" target="_blank" rel="noopener">Using CORS in Express</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">'cors'</span>);</span><br><span class="line"></span><br><span class="line">app.use(cors()) <span class="comment">//enabled</span></span><br></pre></td></tr></table></figure></li>
</ul>

        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/how-does-react-serviceWorker-works/">how does react serviceWorker works</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>framework</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>react</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/how-does-react-serviceWorker-works/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="serviceWorker"><a href="#serviceWorker" class="headerlink" title="serviceWorker"></a>serviceWorker</h4><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/23966686" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/23966686</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This optional code is used to register a service worker.</span></span><br><span class="line"><span class="comment">// register() is not called by default.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This lets the app load faster on subsequent visits in production, and gives</span></span><br><span class="line"><span class="comment">// it offline capabilities. However, it also means that developers (and users)</span></span><br><span class="line"><span class="comment">// will only see deployed updates on subsequent visits to a page, after all the</span></span><br><span class="line"><span class="comment">// existing tabs open on the page have been closed, since previously cached</span></span><br><span class="line"><span class="comment">// resources are updated in the background.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want your app to work offline and load faster, you can change</span></span><br><span class="line"><span class="comment">// unregister() to register() below. Note this comes with some pitfalls.</span></span><br><span class="line"><span class="comment">// Learn more about service workers: https://bit.ly/CRA-PWA</span></span><br><span class="line">serviceWorker.unregister();</span><br></pre></td></tr></table></figure>
        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/how-to-use-mongoose/">how to use mongoose</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/8</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>database</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>mongoose</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/how-to-use-mongoose/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="Schemas"><a href="#Schemas" class="headerlink" title="Schemas"></a>Schemas</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define collection and schema for Course</span></span><br><span class="line"><span class="keyword">var</span> Test = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    course_name: &#123;</span><br><span class="line">        type: <span class="built_in">String</span></span><br><span class="line">    &#125;,</span><br><span class="line">    course_price: &#123;</span><br><span class="line">        type: <span class="built_in">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    timestamps: <span class="literal">true</span>,</span><br><span class="line">    collection: <span class="string">'test'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">'Test'</span>, Test);</span><br></pre></td></tr></table></figure>

<h4 id="three-way-to-get-req-parameters"><a href="#three-way-to-get-req-parameters" class="headerlink" title="three way to get req parameters"></a>three way to get req parameters</h4><blockquote>
<p><a href="https://i5ting.github.io/node-http/#106" target="_blank" rel="noopener">https://i5ting.github.io/node-http/#106</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// req.body.xxx </span></span><br><span class="line"><span class="comment">// has to be post requset</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">'express'</span>)();</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">var</span> multer = <span class="built_in">require</span>(<span class="string">'multer'</span>); </span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json()); <span class="comment">// for parsing application/json</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;)); <span class="comment">// for parsing application/x-www-form-urlencoded</span></span><br><span class="line">app.use(multer()); <span class="comment">// for parsing multipart/form-data</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  res.json(req.body);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// req.query.xxx</span></span><br><span class="line">GET /search?q=tobi+ferret</span><br><span class="line">GET /shoes?order=desc&amp;shoe[color]=blue&amp;shoe[type]=converse</span><br><span class="line"></span><br><span class="line"><span class="comment">// req.params.xxx</span></span><br><span class="line">app.get(<span class="string">'/user/:id'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'user '</span> + req.params.id);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/deploy-web-app-on-heroku/">deploy web app on heroku</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/8/6</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>deploy</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>heroku</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/deploy-web-app-on-heroku/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="get-started-with-nodejs"><a href="#get-started-with-nodejs" class="headerlink" title="get started with nodejs"></a>get started with nodejs</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># install</span></span><br><span class="line">npm install -g heroku</span><br><span class="line"></span><br><span class="line"><span class="comment"># login </span></span><br><span class="line">heroku login</span><br><span class="line"></span><br><span class="line"><span class="comment"># create</span></span><br><span class="line">heroku create</span><br><span class="line"></span><br><span class="line"><span class="comment"># push</span></span><br><span class="line">git push heroku master</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ensure that at least one instance of the app is running:</span></span><br><span class="line">heroku ps:scale web=1</span><br><span class="line">heroku ps:scale web=0 <span class="comment"># no app running</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vist on broswer</span></span><br><span class="line">heroku open</span><br><span class="line"></span><br><span class="line"><span class="comment"># logs</span></span><br><span class="line">heroku logs --tail</span><br><span class="line"></span><br><span class="line"><span class="comment"># procfile - to explicitly declare what command should be executed to start your app.</span></span><br><span class="line">web: node index.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># run app locally</span></span><br><span class="line">heroku <span class="built_in">local</span> web</span><br><span class="line"></span><br><span class="line"><span class="comment"># push changes</span></span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">'commits'</span></span><br><span class="line">git push heroku master</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash</span></span><br><span class="line">heroku run bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># deploy react apps</span></span><br><span class="line">touch Procfile</span><br><span class="line">web: npm start</span><br><span class="line"></span><br><span class="line"><span class="comment"># branch not updating?</span></span><br><span class="line">git push heroku local_branch_name:master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># clear build cache</span></span><br><span class="line">heroku config:<span class="built_in">set</span> NODE_MODULES_CACHE=<span class="literal">false</span></span><br><span class="line">git commit -am <span class="string">'disable node_modules cache'</span> --allow-empty</span><br><span class="line"></span><br><span class="line"><span class="comment"># addons</span></span><br><span class="line">heroku addons:create mongolab <span class="comment"># will generate a MONGODB_URI</span></span><br><span class="line">heroku config <span class="comment">#check configs</span></span><br><span class="line">MONGODB_URI: mongodb://&lt;dbuser&gt;:&lt;dbpassword&gt;@ds259787.mlab.com:59787/heroku_pgd6txgv</span><br><span class="line"></span><br><span class="line"><span class="comment"># DB config</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    secret:<span class="string">'paultest'</span>,</span><br><span class="line">    DB: process.env.MONGODB_URI|| <span class="string">'mongodb://localhost:27017/test'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/vue-test-common-issues/">vue test common issues</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/7/31</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>vue</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>vue-test</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/vue-test-common-issues/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="vue-event-affect"><a href="#vue-event-affect" class="headerlink" title="vue event affect"></a>vue event affect</h4><p>if two component both has attched the same event, it will affect each other</p>

        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/es6/">Update partial Object Array</a>
        </div>
        <div class="info">
        
            <span class="author">
            <span class="fa fa-user-o"></span>paul
            </span>
             
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/7/25</span>
             <span class="categories">
              
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>es6</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/es6/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h4 id="Aarry-prototypes"><a href="#Aarry-prototypes" class="headerlink" title="Aarry prototypes"></a>Aarry prototypes</h4><blockquote>
<p><strong>forEach</strong> for doing a thing with or to every entry in an array;<br><strong>filter</strong> for producing a new array containing only qualifying entries;<br><strong>map</strong> for making a one-to-one new array by transforming an existing array;<br><strong>some</strong> to check whether at least one element in an array fits some description;<br><strong>every</strong> to check whether all entries in an array match a description;<br><strong>find</strong> to look for a value in an array</p>
</blockquote>
<h4 id="e-g"><a href="#e-g" class="headerlink" title="e.g."></a>e.g.</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// map</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [&#123;<span class="attr">a</span>:<span class="string">'1'</span>&#125;, &#123;<span class="attr">b</span>: <span class="string">'2'</span>&#125;]</span><br><span class="line"></span><br><span class="line">arr = arr.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(item.a=== <span class="string">'1'</span>) <span class="keyword">return</span> <span class="built_in">Object</span>.assign(item, &#123;<span class="attr">c</span>: <span class="string">'3'</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> item <span class="comment">// if not return will get undefined</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr) </span><br><span class="line"><span class="comment">//output</span></span><br><span class="line"><span class="comment">// 0: &#123;a: "1", c: "3"&#125;</span></span><br><span class="line"><span class="comment">// 1: &#123;b: "2"&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// for each</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [&#123;<span class="attr">a</span>:<span class="string">'1'</span>&#125;, &#123;<span class="attr">b</span>: <span class="string">'2'</span>&#125;]</span><br><span class="line"></span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item, index, arr</span>)  =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(item.a=== <span class="string">'1'</span>) arr[index] = &#123;<span class="attr">c</span>: <span class="string">'3'</span>&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr) </span><br><span class="line"><span class="comment">//output</span></span><br><span class="line"><span class="comment">// 0: &#123;c: "3"&#125;</span></span><br><span class="line"><span class="comment">// 1: &#123;b: "2"&#125;</span></span><br></pre></td></tr></table></figure>
        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/http/">http</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/7/18</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>frontend</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>http</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/http/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h2 id="HTTP-headers"><a href="#HTTP-headers" class="headerlink" title="HTTP headers"></a>HTTP headers</h2><h4 id="Content-Disposition"><a href="#Content-Disposition" class="headerlink" title="Content-Disposition"></a>Content-Disposition</h4><p>Content-Disposition 消息头指示回复的内容该以何种形式展示，是以内联的形式（即网页或者页面的一部分），还是以附件的形式下载并保存到本地。<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition" target="_blank" rel="noopener">learn more</a></p>
<h2 id="HTTP-Status-Code"><a href="#HTTP-Status-Code" class="headerlink" title="HTTP Status Code"></a>HTTP Status Code</h2><h4 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h4><p>HTTP 304 未改变说明无需再次传输请求的内容，也就是说可以使用缓存的内容。这通常是在一些安全的方法（safe），例如GET 或HEAD 或在请求中附带了头部信息： If-None-Match 或If-Modified-Since。</p>
<p>如果是 200 OK ，响应会带有头部 Cache-Control, Content-Location, Date, ETag, Expires，和 Vary.</p>
<blockquote>
<p>很多浏览器的 开发者工具 会发出额外的请求，以达到 304 的目的，这样可以把资源以本地缓存的形式展现给开发者。</p>
</blockquote>

        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/vscode-plugins/">vscode plugins</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/7/18</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>tools</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>vscode</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/vscode-plugins/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h2 id="Vscode-Plugins"><a href="#Vscode-Plugins" class="headerlink" title="Vscode Plugins"></a>Vscode Plugins</h2><h4 id="Autoprefixer"><a href="#Autoprefixer" class="headerlink" title="Autoprefixer"></a>Autoprefixer</h4><p><em>Useage</em></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install autoprefixer</span></span><br><span class="line"></span><br><span class="line">npm install -g|-D autoprefixer</span><br><span class="line"></span><br><span class="line"><span class="comment"># set shortcuts key</span></span><br><span class="line"></span><br><span class="line">File &gt; Preferences &gt; keyboard shotcuts <span class="comment"># search *autoprefixer* and set any key you like</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># supported type</span></span><br><span class="line"></span><br><span class="line">- css</span><br><span class="line">- less</span><br><span class="line">- scss</span><br></pre></td></tr></table></figure>


        
        </div>
    </div>
  </div>

<div class="archive-item">
     <div class="archive-head">
        <div class="title">
          <a href="/css-tricks/">css tricks</a>
        </div>
        <div class="info">
        
            <span class="publish-date"><span class="fa fa-clock-o"></span>2019/7/17</span>
             <span class="categories">
              
             <span class="fa fa-th-list"></span>
              
                <span>frontend</span>
              
               
            </span>
            <span class="tags">
            
               <span class="fa fa-tags"></span>
                
                <span>css</span>
              
              
            </span>
        </div>
     </div>
    <div class="archive-main">
        <div class="article-image">
          <a href="/css-tricks/"><img id="my_img" src="" alt=""></a>
        </div>
        <div class="article-entry">
        
          <h2 id="column-layout"><a href="#column-layout" class="headerlink" title="column layout"></a>column layout</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span> &#123;</span><br><span class="line">  <span class="attribute">column-count</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">break-inside</span>: avoid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// break-inside: avoid; box-shadow is not fully display</span></span><br><span class="line"><span class="comment">// [box-shadow partially broken](https://stackoverflow.com/questions/47310583/break-inside-avoid-not-working-with-padding-in-edge)</span></span><br><span class="line"><span class="comment">// backface-visibility:hidden; ---- not working</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fix  https://stackoverflow.com/questions/17881923/box-shadow-trimmed-in-css-columns-in-chrome</span></span><br><span class="line"> <span class="attribute">transform</span>: translateZ(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<h2 id="remove-browser-autocomplete"><a href="#remove-browser-autocomplete" class="headerlink" title="remove browser autocomplete"></a>remove browser autocomplete</h2><p>autocomplete 属性规定输入字段是否应该启用自动完成功能。</p>
<p>自动完成允许浏览器预测对字段的输入。当用户在字段开始键入时，浏览器基于之前键入过的值，应该显示出在字段中填写的选项。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注释：autocomplete 属性适用于 &lt;form&gt;，以及下面的 &lt;input&gt; 类型：text, search, url, telephone, email, password, datepickers, range 以及 color。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span>&gt;</span></span><br></pre></td></tr></table></figure>
        
        </div>
    </div>
  </div>

 
</div>
<div class="right">
   <div class="wrapper">
     <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" autocomplete="off"
    name="q" results="0" placeholder="Search" 
    class="search-input"/>
   </div>  
  <div id="local-search-result" class="search-content" style="display:none">
  </div>
  </div>
     <div class="filters">
<div class="filters-title">Tags</div>
 <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongoose/">mongoose</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful-api/">restful api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-test/">vue-test</a><span class="tag-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title"> Categories</div>
 <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/deploy/">deploy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li></ul>
</div>
     <div class="filters">
<div class="filters-title">Archives</div>
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">6</span></li></ul>
</div>

     
  <div class="widget-wrap">
    <h3 class="widget-title">Recent posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/build-a-react-app/">build a react app</a>
          </li>
        
          <li>
            <a href="/build-a-node-restful-api/">build a node restful api</a>
          </li>
        
          <li>
            <a href="/how-does-react-serviceWorker-works/">how does react serviceWorker works</a>
          </li>
        
          <li>
            <a href="/how-to-use-mongoose/">how to use mongoose</a>
          </li>
        
          <li>
            <a href="/deploy-web-app-on-heroku/">deploy web app on heroku</a>
          </li>
        
      </ul>
    </div>
  </div>

   </div>
</div>
</div>
</div></section>
      </div>
      <footer class="footer">
<div class="author">Created by &copy; paulxiaooo</div>
<div class="link">
<a href="https://github.com/paul-xiao/"><span class="fa fa-lg fa-github-square"></span></a>
</div>
</footer>
    </div>
  </div>
  <script src="/js/jquery.min.js"></script>
<script>
$(function () {
    window.addEventListener('keydown', function (e) {
        $('#local-search-result').hide();
        var val = $('#local-search-input').val()
        try {
            if(val && e.keyCode == 13){
               $('#local-search-input').blur();
            
                $.get('/search.json', function(data) {
                    const result = filterPosts(data, [val])
                     $('#local-search-result').show();
                     $('#local-search-result').append(createInnerHTML(result))
                })
            }
        } catch (error) {
            console.log(error);
        }
    })


    $('body').click(function() {
         $('#local-search-result').hide();
    })
    
})

function filterPosts(data, keywords) {
    var results = [];

    data.forEach(function(item) {
      var isMatch = false;
      var matchKeyWords = [];
      item.content = item.content.replace(/<[^>]*>/g, '');

      keywords.forEach(function(word) {
        var reg = new RegExp(word, 'i');
        var indexTitle = item.title.search(reg);
        var indexContent = item.content.search(reg);

        if (indexTitle > -1 || indexContent > -1) {
          isMatch = true;
          matchKeyWords.push(word);
        }
      });

      if (isMatch) {
        item.matchKeyWords = matchKeyWords;
        results.push(item);
      }
    });

    return results;
  }
function createInnerHTML(results) {
    var content = '';
    results.forEach(function(item) {
      var postContent;
      postContent = highlightText(item.content, item.matchKeyWords);
      postContent = getPreviewContent(postContent, item.matchKeyWords);

      item.title = highlightText(item.title, item.matchKeyWords);

      item = '<li class="search-item">' +
        '<a href="' + item.url + '"">' +
        '<h3 class="search-item-title">' + item.title + '</h3>' +
        '</a>' +
        '<p class="search-item-content">' + postContent + '</p>' +
        '</li>';
      content += item;
    });

    return content;
  }

  function getPreviewContent(content, matchKeyWords) {
    var isMatch = false;
    var index = 0;
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp(word, 'i');
      index = content.search(reg);
      if (index < 0) {
        return;
      }

      isMatch = true;
    });

    if (isMatch) {
      if (index < 120) {
        content = content.substr(0, 140);
      } else {
        content = content.substr(index - 60, 200);
      }
    } else {
      content = content.substr(0, 120);
    }

    return content;
  }

  function highlightText(text, matchKeyWords) {
    text = text.replace(/<[^>]*>/g, '');
    matchKeyWords.forEach(function(word) {
      var reg = new RegExp('(' + word + ')', 'ig');
      text = text.replace(reg, '<span class="color-hightlight">$1</span>');
    });

    return text;
  }

</script>

</body>
</html>